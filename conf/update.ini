;;This is main backend configuration file.
;;This file contains configuration for all connectors.
;;Each section here defines a connector to run.
;;Only connectors defined here will be run.

;;TODO: make documentation from this file part of autogenerated sphinx documentation

;;connector specific config values are described in apropriate filter section
;;default values are defined in DEFAULT section
;;
;;It is possible to use following %s interpolation vars (currently 3 are recognized):
;;%(date)s: date of execution in YYYYmmDDHHMMss format
;;%(connector): name of a connector
;;%(connector_lowcase)s: lowercased name of a connector


;;[DEFAULT] section
;;This section defines default values of config parameters.
[DEFAULT]

;;These parameters may be overwritten in each connector section.
;;For each connection following parameters should be defined:
;;url: url of bookstore API, usually this is an url to xml file
#url=

;;mode: mode of a connector, this defines main behaviour of a connector
;;accepted values: UNKNOWN, SINGLE_XML, ZIPPED_XMLS, GZIPPED_XMLS, MULTIPLE_XMLS
mode=SINGLE_XML

;;backup_dir: path to backup directory of connector
backup_dir = backup/%(connector_lowcase)s/%(date)s/


;;filename: name of a file that is fetched from url
filename=%(connector_lowcase)s.xml

;;unpack_file: name of a file after unpacking
;;(applies only for some (G)ZIPPED_XMLS connetors)
#unpack_file=

;;unpack_dir: files will be unpacked to this directory
;;(applies only for (G)ZIPPED_XMLS connetors)
#unpack_dir=

;;remove_unpacked: defines if files fetched by connector, AFTER UNPACKING, should be deleted after execution
;;accepted values: 0,1
;;default (for connectors.ini): 1
remove_unpacked=1

;;backup_archive: defines the format of backup of files fetched by connector
;;accepted values:
;;NONE - remove backup dir after execution
;;UNCOMPRESSED - do not touch backup dir after execution
;;BZIP - create tar.bz2 archive
;;GZIP - create tar.gz archive
;;default (for connectors.ini):
backup_archive=NONE

;;connector_module: name of a module in which connector class should be found
;;accepted_values: correct python namespace
;;default: connectors.specific
connector_module=connectors.specific

;;log_config; path to logging configuration file
;;accepted values: relative or absolute path to file
;;(details of logging configuration in apropriate file)
log_config=conf/log.update.ini

;;log_erratum_config: path to erratum logging config file
;;accepted values: relative or absolute path to file
;;TODO: what is an erratum log?
log_erratum_config=conf/log.erratum.ini

;;filters: list of filters to apply on api file after fetch
;;accepted values: comma separated list of filter classnames
;;all filters are defined in filters module (filters/ dir)
;;most popular filter is RegexFilter that replaces list of patterns by a list of values, in apropriate order
#filters=

;;filters.<filtername>.<config>
;;This is how to set a <config> value for a <filtername> filter
;;e.g:
;;filters.RegexFilter.pattern_list is a comma separated list of patterns to be used by RegexFilter
;;filters.RegexFilter.replace_list is a comma separated list of replace strings to be used by RegexFiltes
#filters.=

;;db_config: path to database config file
;;(details of database configuration in apropriate file)
db_config=conf/db.ini

;;inner_merge: defines algorithm of merging books within own service
;;ALL - all kinds of books can be merged
;;GROUP - records can be merged only if belongs to different groups (ebooks, audiobooks, books)
;;NONE - records should never be merged
inner_merge=NONE


[Abooki]
url=http://weben1.com/XML/4105/6f0ca67289d79eb35d19decbc0a08453_abooki_ceneo_135.xml
filters=RegexFilter
filters.RegexFilter.pattern_list=cd[\s\-_]+audio,\+ audio,mpe,<(desc)>,<(/desc)>
filters.RegexFilter.replace_list=cd,cd,mp3,<\1><![CDATA[,]]><\1>
filters.RegexFilter.IGNORECASE=True
accepted_suffix_patterns=i[ąa]ż[ek]\w+,\d+,\+,program\s+komputerowy,zeszyt,podr[ęe]cznik,(z\s+)?program(em)?\s+multimedialny(m)?,mapka,plik\s+do\s+pobrania,płyta\s+multimedialna,piosenki,puzzle,\(płyta\s+do\s+odtwarzania\s+w\s+komputerze\),karaoke,\s+,_

[Allegro]
url=http://ebooki.allegro.pl/xml/ceneo.xml
pp_url=http://www.a4b-tracking.com/pl/stat-click-text-link/%%(partner_id)s/%%(b64_url)s
pp_url.partner_id=56/120

[Audeo]
url=https://www.a4b-tracking.com/pl/feed/36/120
pp_url=http://www.a4b-tracking.com/pl/stat-click-text-link/%%(partner_id)s/%%(b64_url)s
pp_url.partner_id=36/120
filters=RegexFilter
filters.RegexFilter.pattern_list=<(desc)>,<(/desc)>,(</group></offers>).*
filters.RegexFilter.replace_list=<\1><![CDATA[,]]><\1>,\1
filters.RegexFilter.IGNORECASE=true
filters.RegexFilter.MULTILINE=true
filters.RegexFilter.DOTALL=true

[Audiobook]
url=https://www.a4b-tracking.com/pl/feed/43/120
pp_url=http://www.a4b-tracking.com/pl/stat-click-text-link/%%(partner_id)s/%%(b64_url)s
pp_url.partner_id=43/120
filters=RegexFilter
filters.RegexFilter.pattern_list=cd[\s\-_]+audio,\+ audio,mpe,cd\s+\-\s+mp3,<(desc)>,<(/desc)>
filters.RegexFilter.replace_list=cd,cd,mp3,mp3,<\1><![CDATA[,]]><\1>
filters.RegexFilter.IGNORECASE=true
accepted_suffix_patterns=i[ąa]ż[ek]\w+,\d+,audiobook,podr[ęe]cznik,(?i)\(\s*poziom\s*:?(\s|[\wśą-])+\(?\),rom,download,mb,level[:]?,(z\s+)?program(em)?\s+((komputerowy)|(multimedialny)(m)?),elementary,video,mapka,handbook,dodatek,komp,pakiet,\s+,i,oraz,\+,\-,\(\s*\)

[Audioteka]
url=http://afiliant.com/publisher/xmls/3678/hIBB9dETK4pyWM6n8HVd_109_1.xml

[Bezdroza]
url=http://%(connector_lowcase)s.pl/xml/produkty-%(connector_lowcase)s.xml.zip
filename=%(connector_lowcase)s.zip
unpack_dir=/tmp/%(connector_lowcase)s
unpack_file=%(connector_lowcase)s.xml
mode=ZIPPED_XMLS
pp_url=http://%(connector_lowcase)s.pl/view/%%(partner_id)s/%%(external_id)s.htm
pp_url.partner_id=6018k

#fulfill.condition=type
#fulfill.search.product_type_id=^(2|3|4)$

[BezKartek]
url=http://www.bezkartek.pl/servfile/xmloffers/ekundelekpl.xml.gz
filename=bezkartek.xml.gz
unpack_dir=/tmp/bezkartek
unpack_file=ekundelekpl.xml
mode=GZIPPED_XMLS

[Bookoteka]
url=http://bookoteka.pl/api?api=katalog

[BooksOn]
url=https://www.a4b-tracking.com/pl/feed/51/33

[CzeskieKlimaty]
url=https://www.a4b-tracking.com/pl/feed/53/33

[Czytio]
url = http://www.czytio.pl/admin/xml/ekundelek.xml

[DlaBystrzakow]
url=http://%(connector_lowcase)s.pl/xml/produkty-%(connector_lowcase)s.xml.zip
filename=%(connector_lowcase)s.zip
unpack_dir=/tmp/%(connector_lowcase)s
unpack_file=%(connector_lowcase)s.xml
mode=ZIPPED_XMLS
pp_url=http://septem.pl/view/%%(partner_id)s/%%(external_id)s.htm
pp_url.partner_id=6018k

[DobryEbook]
url=http://dobryebook.pl/xml/spistresci.xml

[eBookpoint]
url=http://%(connector_lowcase)s.pl/xml/produkty-%(connector_lowcase)s.xml.zip
filename=%(connector_lowcase)s.zip
unpack_dir=/tmp/%(connector_lowcase)s
unpack_file=%(connector_lowcase)s.xml
mode=ZIPPED_XMLS
pp_url=http://%(connector_lowcase)s.pl/view/%%(partner_id)s/%%(external_id)s.htm
pp_url.partner_id=6018k

[ebooks43]
url=http://www.ebooks43.pl/index.php
filename=%(connector_lowcase)s.html

[eClicto]
url=http://www.eclicto.pl/export/xml/ceneo/main.xml

[Empik]
#url = https://www.a4b-tracking.com/pl/feed/32/33
url = http://cubegroup.go2feeds.org/feed.php?subdomain=cubegroup&aff_id=2156&offer_id=162&file_id=3562&feed=aHR0cDovL20uc2FsZXNtZWRpYS5wbC9kYXRhLnBocC9leHBvcnQvZXNYbWw&dataSource=empik4&fCategories=Ebooki%%2F&objects=productFeed&object=product&url_tag=productURL&url_query=utm_source%%3Dsalesmedia&source=offer_files_controller.php-841,object.php-119
fulfill.condition=not category
fulfill.search.category=Czytniki|Akcesoria
filters=RegexFilter
filters.RegexFilter.pattern_list=(<deliveryTime>)\s*\n\s*(<\/deliveryTime>)
filters.RegexFilter.replace_list=\1\2
filters.RegexFilter.MULTILINE=true

[EscapeMagazine]
url=http://www.escapemagazine.pl/katalog.xml
pp_url=%%(url)s/s/%%(partner_id)s
pp_url.partner_id=stp

[Fabryka]
url=http://www.fabryka.pl/fileadmin/ftp/ceneo/nljhlysyad/out.ebook-f.xml
fulfill.condition=category
fulfill.search.category=Ebooki

[FantastykaPolska]
url=http://www.bazaebokow.robertjszmidt.pl/?q=ebooki_full.xml
filters=RegexFilter
filters.RegexFilter.pattern_list=&lt;,&gt;,&quot;,(<guid.+?>(\d+).+?</guid>)
filters.RegexFilter.replace_list=<,>,",\1\n<filteredId>\2</filteredId>
filters.RegexFilter.IGNORECASE=true

[Gandalf]
url=http://www.gandalf.com.pl/files/exports/_ceneo_export.xml

[Helion]
url=http://%(connector_lowcase)s.pl/xml/produkty-%(connector_lowcase)s.xml.zip
filename=%(connector_lowcase)s.zip
unpack_dir=/tmp/%(connector_lowcase)s
unpack_file=%(connector_lowcase)s.xml
mode=ZIPPED_XMLS
pp_url=http://%(connector_lowcase)s.pl/view/%%(partner_id)s/%%(external_id)s.htm
pp_url.partner_id=6018k
#fulfill.condition=type
#fulfill.search.product_type_id=^(2|3|4)$

[KodeksyWmp3]
url=http://weben1.com/XML/4105/b0cf188d74589db9b23d5d277238a929_kodeksywmp3_ceneo_329.xml
filters=RegexFilter
filters.RegexFilter.pattern_list=<(desc)>,<(/desc)>,
filters.RegexFilter.replace_list=<\1><![CDATA[,]]><\1>
filters.RegexFilter.IGNORECASE=true

[Koobe]
url=http://www.koobe.pl/export/ekundelek.xml

[Ksiazki]
url=http://www.ksiazki.pl/fileadmin/ftp/ceneo/azhxhkdkhu/out.ebook-k.xml
fulfill.condition=category
fulfill.search.category=Ebooki

[Latarnik]
url=http://latarnik.com.pl/console/integration/execute/name/CeneoV2

[Legimi]
url=http://afiliant.com/publisher/xmls/3678/PAIkgmFdApNjX5AZ6z5z_71_1.xml

[Merlin]
url=https://log.merlin.pl/ads4books/ebooks.xml
username=ads4books
password=debe8uSP
pp_url=http://www.a4b-tracking.com/pl/stat-click-text-link/%%(partner_id)s/%%(b64_url)s
pp_url.partner_id=52/120

[Nexto]
url=http://www.nexto.pl/rf/porownywarki?code=export
filename=nexto.gzip
mode=GZIPPED_XMLS
unpack_dir=/tmp/%(connector_lowcase)s
unpack_file=%(connector_lowcase)s

[OnePress]
url=http://%(connector_lowcase)s.pl/xml/produkty-%(connector_lowcase)s.xml.zip
filename=%(connector_lowcase)s.zip
unpack_dir=/tmp/%(connector_lowcase)s
unpack_file=%(connector_lowcase)s.xml
mode=ZIPPED_XMLS
pp_url=http://%(connector_lowcase)s.pl/view/%%(partner_id)s/%%(external_id)s.htm
pp_url.partner_id=6018k

[Pokatne]
url = http://pokatne.pl/ebooks.xml

[Polona]
url = http://polona.pl/oai/OAIHandler
backup_archive=UNCOMPRESSED
filename=polona.dicts

[Publio]
url = http://publio.pl/files/xml/comparator.xml

[RW2010]
;;RW2010 specific parameters
;;macro_url: url of RW2010 macro that must (should) be run before fetching xml
url = http://www.rw2010.pl/rw2010books.xml
macro_url = http://www.rw2010.pl/go.live.php/launch_macro=gen-xml
filters=RegexFilter
filters.RegexFilter.pattern_list=<(tytul)>,<(/tytul)>,<(autor)>,<(/autor)>
filters.RegexFilter.replace_list=<\1><![CDATA[,]]><\1>,<\1><![CDATA[,]]><\1>

[Selkar]
;;Selkar specific parameters
;;api_key: our key in Selkar partner program
;;aff: our id (e-mail) in Selkar partner program
;;method: Selkar api method to get xml
;;limit: limit of products in one xml fetched
;;categories: categories which we want to fetch, we use
;;2014 - audiobooks
;;2663 - ebooks
;;empty means: all categories
url = http://selkar.pl/selkar/api
api_key=g42n03nyg0n2nrgnewoiwnw312r1
method=getProduct
aff=admin@spistresci.pl
limit=5000
categories=2014,2663
filename = products
mode=MULTIPLE_XMLS

[Sensus]
url=http://%(connector_lowcase)s.pl/xml/produkty-%(connector_lowcase)s.xml.zip
filename=%(connector_lowcase)s.zip
unpack_dir=/tmp/%(connector_lowcase)s
unpack_file=%(connector_lowcase)s.xml
mode=ZIPPED_XMLS
pp_url=http://%(connector_lowcase)s.pl/view/%%(partner_id)s/%%(external_id)s.htm
pp_url.partner_id=6018k

[Septem]
url=http://%(connector_lowcase)s.pl/xml/produkty-%(connector_lowcase)s.xml.zip
filename=%(connector_lowcase)s.zip
unpack_dir=/tmp/%(connector_lowcase)s
unpack_file=%(connector_lowcase)s.xml
mode=ZIPPED_XMLS
pp_url=http://%(connector_lowcase)s.pl/view/%%(partner_id)s/%%(external_id)s.htm
pp_url.partner_id=6018k

[TaniaKsiazka]
url=http://weben1.com/XML/4105/bd48f59a9f04aefd7708058b717453af_taniaksiazka_400.xml
fulfill.condition=type|category
fulfill.search.type=E-ksi..ki|Audiobook
fulfill.search.category=E-booki
[Tmc]
url=http://afiliant.com/publisher/xmls/3678/xdpFCxNYGzBWc7yqp8g6_157_1.xml
fulfill.condition=category
fulfill.search.category=E-booki|Audiobooki

[Virtualo]
url=https://virtualo.pl/data/cennik_full.zip
filename=virtualo.zip
unpack_dir=/tmp/virtualo
mode=ZIPPED_XMLS
#filters=RegexFilter
#filters.RegexFilter.pattern_list=<(description\w*)>,<(/description\w*)>,
#filters.RegexFilter.replace_list=<\1><![CDATA[,]]><\1>
#filters.RegexFilter.IGNORECASE=true

[Wikibooks]
url=http://pl.wikibooks.org/wiki/Kategoria:Kolekcje

[Woblink]
url=http://woblink.com/ceneo.xml
pp_url=http://www.a4b-tracking.com/pl/stat-click-text-link/%%(partner_id)s/%%(b64_url)s
pp_url.partner_id=47/120
filters=RegexFilter
filters.RegexFilter.pattern_list=http://woblink.com/storable/storable/
filters.RegexFilter.replace_list=http://woblink.com/storable/

[WolneEbooki]
url=https://wolneebooki.pl/katalog.xml

[WolneLektury]
url = http://wolnelektury.pl/api/books/
mode=MULTIPLE_JSON
filename=%(connector_lowcase)s.json

[Wydaje]
url = http://wydaje.pl/market/spistresci

[Zantes]
url=http://zantes.pl/katalog.xml
pp_url=%%(url)s/s/%%(partner_id)s
pp_url.partner_id=str

[ZielonaSowa]
url=http://afiliant.com/publisher/xmls/3678/RKbf107fXDdq3PLIcWqP_164_1.xml
#TODO: document fulfill parameters
fulfill.condition=category
fulfill.search.category=E-booki|Audiobooki

[Zinamon]
url=http://www.zinamon.pl/export_ebooks_common.xml

[ZloteMysli]
url=http://export.zlotemysli.pl/ekundelek,RSS/feeds/products.xml
fulfill.condition=product_type_id
fulfill.search.product_type_id=^(2|8|16)$
format_in_title_split_regex=\(.*\(
accepted_suffix_patterns=\), ,audio,
