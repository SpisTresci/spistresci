;;This is main backend configuration file.
;;This file contains configuration for all connectors.
;;Each section here defines a connector to run.
;;Only connectors defined here will be run.

;;TODO: make documentation from this file part of autogenerated sphinx documentation

;;connector specific config values are described in apropriate filter section
;;default values are defined in DEFAULT section
;;
;;It is possible to use following %s interpolation vars (currently 3 are recognized):
;;%(date)s: date of execution in YYYYmmDDHHMMss format
;;%(connector): name of a connector
;;%(connector_lowcase)s: lowercased name of a connector


;;[DEFAULT] section
;;This section defines default values of config parameters.
[DEFAULT]

;;These parameters may be overwritten in each connector section.
;;For each connection following parameters should be defined:
;;url: url of bookstore API, usually this is an url to xml file
#url=

;;mode: mode of a connector, this defines main behaviour of a connector
;;accepted values: UNKNOWN, SINGLE_XML, ZIPPED_XMLS, GZIPPED_XMLS, MULTIPLE_XMLS
mode=SINGLE_XML

;;backup_dir: path to backup directory of connector
backup_dir = backup/%(connector_lowcase)s/%(date)s/


;;filename: name of a file that is fetched from url
filename=%(connector_lowcase)s.xml

;;unpack_file: name of a file after unpacking
;;(applies only for some (G)ZIPPED_XMLS connetors)
#unpack_file=

;;unpack_dir: files will be unpacked to this directory
;;(applies only for (G)ZIPPED_XMLS connetors)
#unpack_dir=

;;remove_unpacked: defines if files fetched by connector, AFTER UNPACKING, should be deleted after execution
;;accepted values: 0,1
;;default (for connectors.ini): 1
remove_unpacked=1

;;backup_archive: defines the format of backup of files fetched by connector
;;accepted values:
;;NONE - remove backup dir after execution
;;UNCOMPRESSED - do not touch backup dir after execution
;;BZIP - create tar.bz2 archive
;;GZIP - create tar.gz archive
;;default (for connectors.ini):
backup_archive=NONE

;;connector_module: name of a module in which connector class should be found
;;accepted_values: correct python namespace
;;default: connectors.specific
connector_module=connectors.specific

;;log_config; path to logging configuration file
;;accepted values: relative or absolute path to file
;;(details of logging configuration in apropriate file)
log_config=conf/log.connectors.ini

;;log_erratum_config: path to erratum logging config file
;;accepted values: relative or absolute path to file
;;TODO: what is an erratum log?
log_erratum_config=conf/log.erratum.ini

;;filters: list of filters to apply on api file after fetch
;;accepted values: comma separated list of filter classnames
;;all filters are defined in filters module (filters/ dir)
;;most popular filter is RegexFilter that replaces list of patterns by a list of values, in apropriate order
#filters=

;;filters.<filtername>.<config>
;;This is how to set a <config> value for a <filtername> filter
;;e.g:
;;filters.RegexFilter.pattern_list is a comma separated list of patterns to be used by RegexFilter
;;filters.RegexFilter.replace_list is a comma separated list of replace strings to be used by RegexFiltes
#filters.=

;;db_config: path to database config file
;;(details of database configuration in apropriate file)
db_config=conf/db.ini

[Abooki]
url=http://weben1.com/XML/4105/6f0ca67289d79eb35d19decbc0a08453_abooki_ceneo_135.xml
filters=RegexFilter
filters.RegexFilter.pattern_list=cd[\s\-_]+audio,\+ audio,mpe,<(desc)>,<(/desc)>
filters.RegexFilter.replace_list=cd,cd,mp3,<\1><![CDATA[,]]><\1>
filters.RegexFilter.IGNORECASE=True
accepted_suffix_patterns=i[ąa]ż[ek]\w+,\d+,\+,program\s+komputerowy,zeszyt,podr[ęe]cznik,(z\s+)?program(em)?\s+multimedialny(m)?,mapka,plik\s+do\s+pobrania,płyta\s+multimedialna,piosenki,puzzle,\(płyta\s+do\s+odtwarzania\s+w\s+komputerze\),karaoke,\s+,_

[Audeo]
url=https://www.a4b-tracking.com/pl/feed/36/33
filters=RegexFilter
filters.RegexFilter.pattern_list=<(desc)>,<(/desc)>,
filters.RegexFilter.replace_list=<\1><![CDATA[,]]><\1>
filters.RegexFilter.IGNORECASE=true

[Audiobook]
url=https://www.a4b-tracking.com/pl/feed/43/33
filters=RegexFilter
filters.RegexFilter.pattern_list=cd[\s\-_]+audio,\+ audio,mpe,cd\s+\-\s+mp3,<(desc)>,<(/desc)>
filters.RegexFilter.replace_list=cd,cd,mp3,mp3,<\1><![CDATA[,]]><\1>
filters.RegexFilter.IGNORECASE=true
accepted_suffix_patterns=i[ąa]ż[ek]\w+,\d+,audiobook,podr[ęe]cznik,(?i)\(\s*poziom\s*:?(\s|[\wśą-])+\(?\),rom,download,mb,level[:]?,(z\s+)?program(em)?\s+((komputerowy)|(multimedialny)(m)?),elementary,video,mapka,handbook,dodatek,komp,pakiet,\s+,i,oraz,\+,\-,\(\s*\)

[Audioteka]
url=http://afiliant.com/publisher/xmls/3678/hIBB9dETK4pyWM6n8HVd_109_1.xml

[Bezdroza]
url=http://helion.pl/xml/produkty-wszystkie.xml.zip
filename=%(connector_lowcase)s.zip
unpack_dir=/tmp/%(connector_lowcase)s
unpack_file=%(connector_lowcase)s.xml
mode=ZIPPED_XMLS

[BezKartek]
url=http://www.bezkartek.pl/servfile/xmloffers/ekundelekpl.xml.gz
filename=bezkartek.xml.gz
unpack_dir=/tmp/bezkartek
unpack_file=ekundelekpl.xml
mode=GZIPPED_XMLS

[Bookoteka]
url=http://bookoteka.pl/api?api=katalog

[BooksOn]
url=https://www.a4b-tracking.com/pl/feed/51/33
filters=Ads4Books
filters.Ads4Books.replace_list=</group></offers>

[CzeskieKlimaty]
url=https://www.a4b-tracking.com/pl/feed/53/33
filters=Ads4Books
filters.Ads4Books.replace_list=</group></offers>

[Czytio]
url = http://www.czytio.pl/admin/xml/ekundelek.xml

[DlaBystrzakow]
url=http://helion.pl/xml/produkty-wszystkie.xml.zip
filename=%(connector_lowcase)s.zip
unpack_dir=/tmp/%(connector_lowcase)s
unpack_file=%(connector_lowcase)s.xml
mode=ZIPPED_XMLS

[DobryEbook]
url=http://dobryebook.pl/xml/spistresci.xml

[eBookpoint]
url=http://helion.pl/xml/produkty-wszystkie.xml.zip
filename=%(connector_lowcase)s.zip
unpack_dir=/tmp/%(connector_lowcase)s
unpack_file=%(connector_lowcase)s.xml
mode=ZIPPED_XMLS

[ebooks43]
url=http://www.ebooks43.pl/index.php
filename=%(connector_lowcase)s.html

[eClicto]
url=http://www.eclicto.pl/export/xml/ceneo/main.xml

[Empik]
url = https://www.a4b-tracking.com/pl/feed/32/33
filters=Ads4Books
filters.Ads4Books.replace_list=</products>

[EscapeMagazine]
url=http://www.escapemagazine.pl/katalog.xml
filters=RegexFilter
filters.RegexFilter.pattern_list=(<url>)([^<]+)(<\/url>)
filters.RegexFilter.replace_list=\1\2/s/stp\3

[FantastykaPolska]
url=http://www.bazaebokow.robertjszmidt.pl/?q=ebooki_full.xml
filters=RegexFilter
filters.RegexFilter.pattern_list=&lt;,&gt;,&quot;,(<guid.+?>(\d+).+?</guid>)
filters.RegexFilter.replace_list=<,>,",\1\n<filteredId>\2</filteredId>
filters.RegexFilter.IGNORECASE=true

[Helion]
url=http://helion.pl/xml/produkty-wszystkie.xml.zip
filename=helion.xml.zip
unpack_dir=/tmp/helion
unpack_file=helion.xml
mode=ZIPPED_XMLS

[KodeksyWmp3]
url=http://weben1.com/XML/4105/b0cf188d74589db9b23d5d277238a929_kodeksywmp3_ceneo_329.xml
filters=RegexFilter
filters.RegexFilter.pattern_list=<(desc)>,<(/desc)>,
filters.RegexFilter.replace_list=<\1><![CDATA[,]]><\1>
filters.RegexFilter.IGNORECASE=true

[Koobe]
url=http://www.koobe.pl/export/ekundelek.xml

[Latarnik]
url=http://latarnik.com.pl/console/integration/execute/name/CeneoV2

[Legimi]
url=http://afiliant.com/publisher/xmls/3678/PAIkgmFdApNjX5AZ6z5z_71_1.xml

[Merlin]
#TODO: CHANGE ACCORDING TO T281
url=https://www.a4b-tracking.com/pl/feed/52/10

[Nexto]
;;Nexto specific parameters:
;;api_id: our id in Nexto prtner program
;;pass: password
;;xmltype: Nexto API parameter defines type of xml to fetch
url = https://www.nextoapi.pl/download_xml.req
filename=download_xml.gzip
unpack_dir=/tmp/nexto
unpack_file=download_xml
mode=GZIPPED_XMLS
api_id=ZDhlODFkYjctNzYyZC00YTZjLTlkOTgtMTY4NDRhMDYwNDlm
pass=pomyslowo42
xmltype=PRODUCTS_LIST

[OnePress]
url=http://helion.pl/xml/produkty-wszystkie.xml.zip
filename=%(connector_lowcase)s.zip
unpack_dir=/tmp/%(connector_lowcase)s
unpack_file=%(connector_lowcase)s.xml
mode=ZIPPED_XMLS

[Pokatne]
url = http://pokatne.pl/ebooks.xml


[Publio]
url = http://publio.pl/files/xml/comparator.xml

[RW2010]
;;RW2010 specific parameters
;;macro_url: url of RW2010 macro that must (should) be run before fetching xml
url = http://www.rw2010.pl/rw2010books.xml
macro_url = http://www.rw2010.pl/go.live.php/launch_macro=gen-xml

[Selkar]
;;Selkar specific parameters
;;api_key: our key in Selkar partner program
;;aff: our id (e-mail) in Selkar partner program
;;method: Selkar api method to get xml
;;limit: limit of products in one xml fetched
;;categories: categories which we want to fetch, we use
;;2014 - audiobooks
;;2663 - ebooks
;;empty means: all categories
url = http://selkar.pl/selkar/api
api_key=g42n03nyg0n2nrgnewoiwnw312r1
method=getProduct
aff=admin@spistresci.pl
limit=5000
categories=2014,2663
filename = products
mode=MULTIPLE_XMLS

[Sensus]
url=http://helion.pl/xml/produkty-wszystkie.xml.zip
filename=%(connector_lowcase)s.zip
unpack_dir=/tmp/%(connector_lowcase)s
unpack_file=%(connector_lowcase)s.xml
mode=ZIPPED_XMLS

[Septem]
url=http://helion.pl/xml/produkty-wszystkie.xml.zip
filename=%(connector_lowcase)s.zip
unpack_dir=/tmp/%(connector_lowcase)s
unpack_file=%(connector_lowcase)s.xml
mode=ZIPPED_XMLS

[TaniaKsiazka]
url=http://weben1.com/XML/4105/bd48f59a9f04aefd7708058b717453af_taniaksiazka_400.xml

#Tmc does not contain any (e)books, so we can turn this connector out currently
[Tmc]
disabled = True
url=http://afiliant.com/publisher/xmls/3678/xdpFCxNYGzBWc7yqp8g6_157_1.xml

[Virtualo]
url=https://virtualo.pl/data/cennik_full.zip
filename=virtualo.zip
unpack_dir=/tmp/virtualo
mode=ZIPPED_XMLS
filters=RegexFilter
filters.RegexFilter.pattern_list=<(description\w*)>,<(/description\w*)>,
filters.RegexFilter.replace_list=<\1><![CDATA[,]]><\1>
filters.RegexFilter.IGNORECASE=true

[Wikibooks]
url=http://pl.wikibooks.org/wiki/Kategoria:Kolekcje

[Woblink]
url=https://www.a4b-tracking.com/pl/feed/47/33
filters=Ads4Books,RegexFilter
filters.Ads4Books.replace_list=</group></offers>

filters.RegexFilter.pattern_list=http://woblink.com/storable/storable/
filters.RegexFilter.replace_list=http://woblink.com/storable/

[WolneEbooki]
url=https://wolneebooki.pl/katalog.xml

[WolneLektury]
url = http://wolnelektury.pl/api/books/
mode=MULTIPLE_JSON
filename=%(connector_lowcase)s.json

[Zantes]
url=http://zantes.pl/katalog.xml
filters=RegexFilter
filters.RegexFilter.pattern_list=(<url>)([^<]+)(<\/url>)
filters.RegexFilter.replace_list=\1\2/s/stp\3

[ZielonaSowa]
disabled=True
url=http://afiliant.com/publisher/xmls/3678/RKbf107fXDdq3PLIcWqP_164_1.xml
#TODO: document fulfill parameters
fulfill.condition=category
fulfill.search.category=E-booki

[Zinamon]
url=http://www.zinamon.pl/export_ebooks_common.xml

[ZloteMysli]
disabled=True
url=http://export.zlotemysli.pl/32320,RSS/feeds/products.xml
fulfill.condition=product_type_id
fulfill.search.product_type_id=2
