;This is main backend configuration file.
;;This file contains configuration for all connectors.
;;Each section here defines a connector to run.
;;Only connectors defined here will be run.

;;TODO: make documentation from this file part of autogenerated sphinx documentation

;;connector specific config values are described in apropriate filter section
;;default values are defined in DEFAULT section
;;
;;It is possible to use following %s interpolation vars (currently 3 are recognized):
;;%(date)s: date of execution in YYYYmmDDHHMMss format
;;%(connector): name of a connector
;;%(connector_lowcase)s: lowercased name of a connector


;;[DEFAULT] section
;;This section defines default values of config parameters.
[DEFAULT]

;;These parameters may be overwritten in each connector section.
;;For each connection following parameters should be defined:
;;url: url of bookstore API, usually this is an url to xml file
#url=

;;mode: mode of a connector, this defines main behaviour of a connector
;;accepted values: UNKNOWN, SINGLE_XML, ZIPPED_XMLS, GZIPPED_XMLS, MULTIPLE_XMLS
mode=SINGLE_XML

;;backup_dir: path to backup directory of connector
backup_dir = backup/%(connector_lowcase)s/%(date)s/


;;filename: name of a file that is fetched from url
filename=%(connector_lowcase)s.xml

;;unpack_file: name of a file after unpacking
;;(applies only for some (G)ZIPPED_XMLS connetors)
#unpack_file=

;;unpack_dir: files will be unpacked to this directory
;;(applies only for (G)ZIPPED_XMLS connetors)
#unpack_dir=

;;remove_unpacked: defines if files fetched by connector, AFTER UNPACKING, should be deleted after execution
;;accepted values: 0,1
;;default (for connectors.ini): 1
remove_unpacked=1

;;backup_archive: defines the format of backup of files fetched by connector
;;accepted values:
;;NONE - remove backup dir after execution
;;UNCOMPRESSED - do not touch backup dir after execution
;;BZIP - create tar.bz2 archive
;;GZIP - create tar.gz archive
;;default (for connectors.ini):
backup_archive=NONE

;;connector_module: name of a module in which connector class should be found
;;accepted_values: correct python namespace
;;default: connectors.specific
connector_module=spistresci.connectors.specific

;;log_config; path to logging configuration file
;;accepted values: relative or absolute path to file
;;(details of logging configuration in apropriate file)
log_config=conf/log.update.ini

;;log_erratum_config: path to erratum logging config file
;;accepted values: relative or absolute path to file
;;TODO: what is an erratum log?
log_erratum_config=conf/log.erratum.ini

;;filters: list of filters to apply on api file after fetch
;;accepted values: comma separated list of filter classnames
;;all filters are defined in filters module (filters/ dir)
;;most popular filter is RegexFilter that replaces list of patterns by a list of values, in apropriate order
#filters=

;;filters.<filtername>.<config>
;;This is how to set a <config> value for a <filtername> filter
;;e.g:
;;filters.RegexFilter.pattern_list is a comma separated list of patterns to be used by RegexFilter
;;filters.RegexFilter.replace_list is a comma separated list of replace strings to be used by RegexFiltes
#filters.=

;;db_config: path to database config file
;;(details of database configuration in apropriate file)
db_config=conf/db.ini

;;inner_merge: defines algorithm of merging books within own service
;;ALL - all kinds of books can be merged
;;GROUP - records can be merged only if belongs to different groups (ebooks, audiobooks, books)
;;NONE - records should never be merged
inner_merge=NONE

[Allegro]
url=http://ebooki.allegro.pl/xml/ceneo.xml
pp_url=http://www.a4b-tracking.com/pl/stat-click-text-link/%%(partner_id)s/%%(b64_url)s
pp_url.partner_id=56/120

[CzeskieKlimaty]
url=http://czeskieklimaty.pl/xml/ceneo.xml
pp_url=http://www.a4b-tracking.com/pl/stat-click-text-link/%%(partner_id)s/%%(b64_url)s
pp_url.partner_id=53/33

[Gandalf]
url=http://www.gandalf.com.pl/files/exports/_ceneo_export.xml

[Virtualo]
url=https://virtualo.pl/data/cennik_full.zip
filename=virtualo.zip
unpack_dir=/tmp/virtualo
mode=ZIPPED_XMLS
filters=RegexFilter
filters.RegexFilter.pattern_list=<(tags\w*)>,<(/tags\w*)>,
filters.RegexFilter.replace_list=<\1><![CDATA[,]]><\1>
#filters.RegexFilter.IGNORECASE=true
pp_url=http://www.a4b-tracking.com/pl/stat-click-text-link/%%(partner_id)s/%%(b64_url)s
pp_url.partner_id=12/120

[Woblink]
url=http://woblink.com/ceneo.xml
pp_url=http://www.a4b-tracking.com/pl/stat-click-text-link/%%(partner_id)s/%%(b64_url)s
pp_url.partner_id=47/120
filters=RegexFilter
filters.RegexFilter.pattern_list=http://woblink.com/storable/storable/
filters.RegexFilter.replace_list=http://woblink.com/storable/
